{% extends 'mailing/base.html' %}
{% load my_tags %}
{% block content %}
    <div class="row">
        <div class="col-8">
            <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
                <h1 class="display-6">Сервис рассылки писем</h1>
            </div>
        </div>
        <div class="col-4">
            <ul class="list-group px-3 py-3 pt-md-5 pb-md-4 mx-auto ml-auto">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Создано рассылок:
                    <span class="badge bg-dark rounded-pill">{{ count_mailing }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Количество активных рассылок:
                    <span class="badge bg-dark rounded-pill">{{ count_active_mailings }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Количество уникальных клиентов:
                    <span class="badge bg-dark rounded-pill">{{ count_unique_clients }}</span>
                </li>
            </ul>
        </div>
    </div>

    <div class="row text-center">
        {% for blog in random_blog_posts %}
            <div class="col-4">
                <div class="card mb-4 box-shadow">
                    <img class="rounded"
                         style='width: 300px;height: 300px;overflow: hidden;margin: 20px; object-fit: contain'
                         alt="Image"
                         onerror="this.src='https://cdn.pixabay.com/photo/2012/02/16/12/09/blog-13443_640.jpg'"
                         src="{% mediapath blog.image %}"/>
                    <div class="card-body">
                        <h3 class="card-title pricing-card-title">{{ blog }}</h3>
                        <ul class="list-unstyled mt-3 mb-4 text-start m-3">
                            <p>{{ blog.text|truncatechars:100 }}</p>
                        </ul>
                        <a href="{% url 'blog:view' blog.pk %}" type="button"
                           class="btn btn-primary btn-block btn-outline-dark mt-auto">Подробнее</a>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex justify-content-between align-items-center">
                            <small>Создано: <strong>{{ blog.data_created }}</strong></small>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
